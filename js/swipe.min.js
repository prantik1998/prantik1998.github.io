!function(t,e,n){"function"==typeof define&&define.amd?define(["jquery"],function(o){return n(o,t,e),o.mobile}):n(t.jQuery,t,e)}(this,document,function(t,e,n,o){(function(t,e,n,o){function i(t){for(;t&&void 0!==t.originalEvent;)t=t.originalEvent;return t}function r(e,n){var r,s,a,c,u,l,h,p,v,d=e.type;if(e=t.Event(e),e.type=n,r=e.originalEvent,s=t.event.props,d.search(/^(mouse|click)/)>-1&&(s=M),r)for(h=s.length,c;h;)c=s[--h],e[c]=r[c];if(d.search(/mouse(down|up)|click/)>-1&&!e.which&&(e.which=1),-1!==d.search(/^touch/)&&(a=i(r),d=a.touches,u=a.changedTouches,l=d&&d.length?d[0]:u&&u.length?u[0]:o))for(p=0,v=X.length;p<v;p++)c=X[p],e[c]=l[c];return e}function s(e){for(var n,o,i={};e;){n=t.data(e,E);for(o in n)n[o]&&(i[o]=i.hasVirtualBinding=!0);e=e.parentNode}return i}function a(e,n){for(var o;e;){if((o=t.data(e,E))&&(!n||o[n]))return e;e=e.parentNode}return null}function c(){z=!0}function u(){z=!1}function l(){h(),S=setTimeout(function(){S=0,V=0,N.length=0,j=!1,c()},t.vmouse.resetTimerDuration)}function h(){S&&(clearTimeout(S),S=0)}function p(e,n,o){var i;return(o&&o[e]||!o&&a(n.target,e))&&(i=r(n,e),t(n.target).trigger(i)),i}function v(e){var n=t.data(e.target,k);if(!(j||V&&V===n)){var o=p("v"+e.type,e);o&&(o.isDefaultPrevented()&&e.preventDefault(),o.isPropagationStopped()&&e.stopPropagation(),o.isImmediatePropagationStopped()&&e.stopImmediatePropagation())}}function d(e){var n,o,r=i(e).touches;if(r&&1===r.length&&(n=e.target,(o=s(n)).hasVirtualBinding)){V=L++,t.data(n,k,V),h(),u(),B=!1;var a=i(e).touches[0];I=a.pageX,x=a.pageY,p("vmouseover",e,o),p("vmousedown",e,o)}}function f(t){z||(B||p("vmousecancel",t,s(t.target)),B=!0,l())}function m(e){if(!z){var n=i(e).touches[0],o=B,r=t.vmouse.moveDistanceThreshold,a=s(e.target);(B=B||Math.abs(n.pageX-I)>r||Math.abs(n.pageY-x)>r)&&!o&&p("vmousecancel",e,a),p("vmousemove",e,a),l()}}function g(t){if(!z){c();var e,n=s(t.target);if(p("vmouseup",t,n),!B){var o=p("vclick",t,n);o&&o.isDefaultPrevented()&&(e=i(t).changedTouches[0],N.push({touchID:V,x:e.clientX,y:e.clientY}),j=!0)}p("vmouseout",t,n),B=!1,l()}}function b(e){var n,o=t.data(e,E);if(o)for(n in o)if(o[n])return!0;return!1}function w(){}function T(e){var n=e.substr(1);return{setup:function(o,i){b(this)||t.data(this,E,{});t.data(this,E)[e]=!0,P[e]=(P[e]||0)+1,1===P[e]&&H.bind(n,v),t(this).bind(n,w),F&&(P.touchstart=(P.touchstart||0)+1,1===P.touchstart&&H.bind("touchstart",d).bind("touchend",g).bind("touchmove",m).bind("scroll",f))},teardown:function(o,i){--P[e],P[e]||H.unbind(n,v),F&&(--P.touchstart,P.touchstart||H.unbind("touchstart",d).unbind("touchmove",m).unbind("touchend",g).unbind("scroll",f));var r=t(this),s=t.data(this,E);s&&(s[e]=!1),r.unbind(n,w),b(this)||r.removeData(E)}}}var D,E="virtualMouseBindings",k="virtualTouchID",y="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),X="clientX clientY pageX pageY screenX screenY".split(" "),Y=t.event.mouseHooks?t.event.mouseHooks.props:[],M=t.event.props.concat(Y),P={},S=0,I=0,x=0,B=!1,N=[],j=!1,z=!1,F="addEventListener"in n,H=t(n),L=1,V=0;t.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var q=0;q<y.length;q++)t.event.special[y[q]]=T(y[q]);F&&n.addEventListener("click",function(e){var n,o,i,r,s,a=N.length,c=e.target;if(a)for(n=e.clientX,o=e.clientY,D=t.vmouse.clickDistanceThreshold,i=c;i;){for(r=0;r<a;r++)if(s=N[r],0,i===c&&Math.abs(s.x-n)<D&&Math.abs(s.y-o)<D||t.data(i,k)===s.touchID)return e.preventDefault(),void e.stopPropagation();i=i.parentNode}},!0)})(t,0,n),function(t){t.mobile={}}(t),function(t,e){var o={touch:"ontouchend"in n};t.mobile.support=t.mobile.support||{},t.extend(t.support,o),t.extend(t.mobile.support,o)}(t),function(t,e,o){function i(e,n,o){var i=o.type;o.type=n,t.event.dispatch.call(e,o),o.type=i}var r=t(n);t.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(e,n){t.fn[n]=function(t){return t?this.bind(n,t):this.trigger(n)},t.attrFn&&(t.attrFn[n]=!0)});var s=t.mobile.support.touch,a=s?"touchstart":"mousedown",c=s?"touchend":"mouseup",u=s?"touchmove":"mousemove";t.event.special.scrollstart={enabled:!0,setup:function(){function e(t,e){i(r,(n=e)?"scrollstart":"scrollstop",t)}var n,o,r=this;t(r).bind("touchmove scroll",function(i){t.event.special.scrollstart.enabled&&(n||e(i,!0),clearTimeout(o),o=setTimeout(function(){e(i,!1)},50))})}},t.event.special.tap={tapholdThreshold:750,setup:function(){var e=this,n=t(e);n.bind("vmousedown",function(o){function s(){clearTimeout(u)}function a(){s(),n.unbind("vclick",c).unbind("vmouseup",s),r.unbind("vmousecancel",a)}function c(t){a(),l===t.target&&i(e,"tap",t)}if(o.which&&1!==o.which)return!1;var u,l=o.target;o.originalEvent;n.bind("vmouseup",s).bind("vclick",c),r.bind("vmousecancel",a),u=setTimeout(function(){i(e,"taphold",t.Event("taphold",{target:l}))},t.event.special.tap.tapholdThreshold)})}},t.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,start:function(e){var n=e.originalEvent.touches?e.originalEvent.touches[0]:e;return{time:(new Date).getTime(),coords:[n.pageX,n.pageY],origin:t(e.target)}},stop:function(t){var e=t.originalEvent.touches?t.originalEvent.touches[0]:t;return{time:(new Date).getTime(),coords:[e.pageX,e.pageY]}},handleSwipe:function(e,n){n.time-e.time<t.event.special.swipe.durationThreshold&&Math.abs(e.coords[0]-n.coords[0])>t.event.special.swipe.horizontalDistanceThreshold&&Math.abs(e.coords[1]-n.coords[1])<t.event.special.swipe.verticalDistanceThreshold&&e.origin.trigger("swipe").trigger(e.coords[0]>n.coords[0]?"swipeleft":"swiperight")},setup:function(){var e=t(this);e.bind(a,function(n){function o(e){r&&(i=t.event.special.swipe.stop(e),Math.abs(r.coords[0]-i.coords[0])>t.event.special.swipe.scrollSupressionThreshold&&e.preventDefault())}var i,r=t.event.special.swipe.start(n);e.bind(u,o).one(c,function(){e.unbind(u,o),r&&i&&t.event.special.swipe.handleSwipe(r,i),r=i=void 0})})}},t.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(e,n){t.event.special[e]={setup:function(){t(this).bind(n,t.noop)}}})}(t)});